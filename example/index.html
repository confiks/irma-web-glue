<!doctype html>

<html>

  <head>
    <title>IRMA web glue example</title>
    <script src="irma-web-glue.js" type="text/javascript"></script>
    <link rel="stylesheet" href="//nuts-foundation.github.io/irma-web-frontend/application.css" />

    <script type="text/javascript">
      window.addEventListener('load', function() {

        // The usual configuration for irmajs
        const server = "http://localhost:8088";
        const request = {
          type: 'disclosing',
          content: [{
              label:        'Over 18',
              attributes: [ 'irma-demo.MijnOverheid.ageLower.over18' ]
          }]
        };

        // These are the default irma-web-glue options:
        const glueOptions = {
          showHelper: false,
          translations: {
            header:    'Inloggen met <i class="irma-web-logo">IRMA</i>',
            helper:    'Kom je er niet uit? Kijk dan eerst eens op <a href="https://privacybydesign.foundation/irma-begin/">de website van IRMA</a>.',
            loading:   'Eén moment alsjeblieft',
            button:    'Open IRMA app',
            qrCode:    'Toon QR code',
            phone:     'Volg de instructies op je telefoon',
            retry:     'Opnieuw proberen',
            cancelled: 'Transactie is geannuleerd',
            timeout:   'Transactie is verlopen',
            error:     'Er is een fout opgetreden',
            browser:   'Het spijt ons, maar je browser voldoet niet aan de minimale eisen',
            success:   'Gelukt!'
          }
        };

        // Initialize irma-web-glue
        var irmaForm = document.getElementById('irma-web-form');
        var glue     = new irmaWebGlue(irmaForm, glueOptions);

        glue.startSession(server, request)
            .then(function() { alert("Succesful disclosure!") })
            .catch(function() { alert("Disclosure failed :/") });

      });
    </script>

    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
    </style>
  </head>

  <body class="irma-web-center-child">
    <section class="irma-web-form" id="irma-web-form">
      <header class="header">
        <p>Inloggen met <i class="irma-web-logo">IRMA</i></p>
      </header>
      <section class="content">
        <section class="centered">
          <!-- State: Uninitialized -->
          <div class="irma-web-loading-animation">
            <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
          </div>
          <p>Eén moment alsjeblieft</p>
        </section>
      </section>
    </section>
  </body>

</html>
